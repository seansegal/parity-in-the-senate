votes <- separate(votes, yeartime, c("year","time"), sep = 4)
votes$datec <- as.Date(paste(votes$month,votes$day,votes$year),format = "%B %d %Y")
votes$description <- sapply(votes$description, as.character)
votes$description <- rm_white(votes$description)
votes <- separate(votes, description, c("type","extra"), sep = " ", extra = "merge")
roll <- votes[votes$type == "ROLL",]
consent <- votes[votes$type == "CONSENT",]
votesFIN <- votes[(votes$type != "ROLL" & votes$type != "CONSENT"),]
cols <- colnames(votesFIN)
sens <- cols[c(8:length(cols))]
justvotes <- votesFIN[,sens]
jvY <- (justvotes == 'Y')*1
jvN <- (justvotes == 'N')*1
jvNA <- (justvotes == 'NA')*1
jvNV <- (justvotes == 'NV')*1
jvYN <- jvY + jvN
jvplusdates <- cbind(votesFIN$datec,justvotes)
library("qdapRegex", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
votes <- read.csv("data.csv", header=T)
votes$date <- sapply(votes$date, as.character)
votes <- separate(votes, date, c("weekday","monthday","yeartime"), sep = '/ ')
votes <- separate(votes, monthday, c("month", "day"), sep = " ")
votes <- separate(votes, yeartime, c("year","time"), sep = 4)
votes$datec <- as.Date(paste(votes$month,votes$day,votes$year),format = "%B %d %Y")
votes$description <- sapply(votes$description, as.character)
votes$description <- rm_white(votes$description)
votes <- separate(votes, description, c("type","extra"), sep = " ", extra = "merge")
roll <- votes[votes$type == "ROLL",]
consent <- votes[votes$type == "CONSENT",]
votesFIN <- votes[(votes$type != "ROLL" & votes$type != "CONSENT"),]
cols <- colnames(votesFIN)
sens <- cols[c(8:length(cols))]
justvotes <- votesFIN[,sens]
jvY <- (justvotes == 'Y')*1
jvN <- (justvotes == 'N')*1
jvNA <- (justvotes == 'NA')*1
jvNV <- (justvotes == 'NV')*1
jvYN <- jvY + jvN
sens <- cols[c(8:(length(cols)-1))]
justvotes <- votesFIN[,sens]
jvY <- (justvotes == 'Y')*1
jvN <- (justvotes == 'N')*1
jvNA <- (justvotes == 'NA')*1
jvNV <- (justvotes == 'NV')*1
jvYN <- jvY + jvN
jvplusdates <- cbind(votesFIN$datec,justvotes)
jvplusdates
i = 1
votesFIN[jvYN[,i],"datec"]
for (i in c(1:length(sens))){
datemin = min(votesFIN[jvYN[,i],"datec"])
datemax = max(votesFIN[jvYN[,i],"datec"])
}
for (j in df$lastname){
print(j)
}
for (j in df$lastname){
datemin = min(votesFIN[jvYN[,i],"datec"])
print(datemin)
}
for (j in df$lastname){
datemin = min(votesFIN[jvYN[,j],"datec"])
print(datemin)
}
j
for (j in df$lastname){
if (j ~= "Ponte"){
datemin = min(votesFIN[jvYN[,j],"datec"])
print(datemin)
}
}
sens
j
j ~= "Ponte"
j != "Ponte"
for (j in df$lastname){
if (j != "Ponte"){j
datemin = min(votesFIN[jvYN[,j],"datec"])
print(datemin)
}
}
for (j in df$lastname){
if (j != "Ponte"){j
datemin = min(votesFIN[jvYN[,j],"datec"])
datemax = max(votesFIN[jvYN[,j],"datec"])
print(paste(datemin,datemax))
}
}
for (j in df$lastname){
if (j != "Ponte"){
datemin = min(votesFIN[jvYN[,j],"datec"])
datemax = max(votesFIN[jvYN[,j],"datec"])
print(paste(datemin,datemax))
}
}
for (j in df$lastname){
if (j != "Ponte"){
datemin = min(votesFIN[jvYN[,j],"datec"])
datemax = max(votesFIN[jvYN[,j],"datec"])
print(paste(datemin,datemax))
}
}
source('~/Desktop/cleaner.R')
df$lastname
j = "Kettle"
votesFIN[jvYN[,j]
votesFIN[jvYN[,j],"datec"]
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header=T)
votes
votes[,c("Mr..President","Ruggerio")]
table(paste(votes$Mr..President,votes$Ruggerio))
votes[votes$Mr..President = "N/A","Mr..President"]
votes[votes$Mr..President == "N/A","Mr..President"]
votes[votes$Ruggerio == "N/A","Ruggerio"] <- votes[votes$Ruggerio == "N/A","Mr..President"]
table(paste(votes$Mr..President,votes$Ruggerio))
table(paste(votes$Madam.President,votes$Paiva.Weed))
votes[votes$Paiva.Weed == "N/A","Paiva.Weed"] <- votes[votes$Paiva.Weed == "N/A","Madam.President"]
table(votes$Paiva.Weed)
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header=T)
table(votes$Paiva.Weed)
table(votes$Madam.President)
votes[votes$Ruggerio == "N/A","Ruggerio"] <- votes[votes$Ruggerio == "N/A","Mr..President"]
votes[votes$Paiva.Weed == "N/A","Paiva.Weed"] <- votes[votes$Paiva.Weed == "N/A","Madam.President"]
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header=T)
table(votes$Ruggerio)
table(votes$Mr..President)
votes[votes$Ruggerio == "N/A","Ruggerio"] <- votes[votes$Ruggerio == "N/A","Mr..President"]
table(votes$Ruggerio)
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header=T)
votes[votes[,"Ruggerio"] == "N/A","Ruggerio"] <- votes[votes[,"Ruggerio"] == "N/A","Mr..President"]
votes[,"Ruggerio"]
table(votes[,"Ruggerio"])
votes[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"] <- votes[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"]
table(votes[,"Paiva.Weed"])
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header=T)
votes[votes[,"Ruggerio"] == "N/A","Ruggerio"] <- votes[votes[,"Ruggerio"] == "N/A","Mr..President"]
votes[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"] <- votes[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"]
votes[,"Paiva.Weed"]
table(votes$Paiva.Weed)
table(votes$Ruggerio)
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header=T)
votes[votes[,"Ruggerio"] == "N/A","Ruggerio"] <- votes[votes[,"Ruggerio"] == "N/A","Mr..President"]
votes[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"] <- votes[votes[,"Paiva.Weed"] == "N/A","Madam.President"]
votes[,"Paiva.Weed"]
votes[is.na(votes[,"Paiva.Weed"]),"Paiva.Weed"]
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header=T)
votes[votes[,"Ruggerio"] == "N/A","Ruggerio"] <- votes[votes[,"Ruggerio"] == "N/A","Mr..President"]
votes[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"] <- votes[votes[,"Paiva.Weed"] == "N/A","Madam.President"]
votes[is.na(votes[,"Paiva.Weed"]),"Paiva.Weed"] <- "N"
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header=T)
table(votes$Paiva.Weed)
table(votes$Madam.President)
table(votes$Ruggerio)
votes <- read.csv("data.csv", header=T, stringsAsFactors=FALSE)
votes[votes[,"Ruggerio"] == "N/A","Ruggerio"] <- votes[votes[,"Ruggerio"] == "N/A","Mr..President"]
votes[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"] <- votes[votes[,"Paiva.Weed"] == "N/A","Madam.President"]
table(votes$Ruggerio)
table(votes$Paiva.Weed)
write(votes,"data2.csv")
write.csv(votes,"data2.csv", rownames = F)
write.csv(votes,"data2.csv", row.names = F)
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header = T, stringsAsFactors=FALSE)
votes2 = votes
votes2[votes[,"Ruggerio"] == "N/A","Ruggerio"] <- votes[votes[,"Ruggerio"] == "N/A","Mr..President"]
votes2[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"] <- votes[votes[,"Paiva.Weed"] == "N/A","Madam.President"]
write.csv(votes2,"data3.csv", row.names = F)
votes2 <- votes2[,-c("Mr..President")]
votes2 <- votes2[,!c("Mr..President")]
which(colnames(votes2)=="Mr..President")
votes2 <- votes2[,-which(colnames(votes2)=="Mr..President")]
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header = T, stringsAsFactors=FALSE)
votes2 = votes
votes2[votes[,"Ruggerio"] == "N/A","Ruggerio"] <- votes[votes[,"Ruggerio"] == "N/A","Mr..President"]
votes2[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"] <- votes[votes[,"Paiva.Weed"] == "N/A","Madam.President"]
votes2 <- votes2[,-c(which(colnames(votes2)=="Mr..President"),which(colnames(votes2)=="Madam.President"))]
votes2
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
votes <- read.csv("data.csv", header = T, stringsAsFactors=FALSE)
votes2 = votes
votes2[votes[,"Ruggerio"] == "N/A","Ruggerio"] <- votes[votes[,"Ruggerio"] == "N/A","Mr..President"]
votes2[votes[,"Paiva.Weed"] == "N/A","Paiva.Weed"] <- votes[votes[,"Paiva.Weed"] == "N/A","Madam.President"]
votes2 <- votes2[,-c(which(colnames(votes2)=="Mr..President"),which(colnames(votes2)=="Madam.President"))]
write.csv(votes2,"data2.csv", row.names = F)
write.csv(votes2,"data2.csv", row.names = F)
i = 1
jvYN[,i]
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
library(tidyr)
library(qdapRegex)
votes <- read.csv("data2.csv", header=T)
votes$date <- sapply(votes$date, as.character)
votes <- separate(votes, date, c("weekday","monthday","yeartime"), sep = '/ ')
votes <- separate(votes, monthday, c("month", "day"), sep = " ")
votes <- separate(votes, yeartime, c("year","time"), sep = 4)
votes$datec <- as.Date(paste(votes$month,votes$day,votes$year),format = "%B %d %Y")
votes$description <- sapply(votes$description, as.character)
votes$description <- rm_white(votes$description)
votes <- separate(votes, description, c("type","extra"), sep = " ", extra = "merge")
roll <- votes[votes$type == "ROLL",]
consent <- votes[votes$type == "CONSENT",]
votesFIN <- votes[(votes$type != "ROLL" & votes$type != "CONSENT"),]
cols <- colnames(votesFIN)
sens <- cols[c(8:(length(cols)-1))]
justvotes <- votesFIN[,sens]
jvY <- (justvotes == 'Y')*1
jvN <- (justvotes == 'N')*1
jvNA <- (justvotes == 'NA')*1
jvNV <- (justvotes == 'NV')*1
jvYN <- jvY + jvN
output <- data.frame(matrix(0,nrow = (length(sens)*(length(sens)-1)/2), ncol = 4))
inc <- 1
for (i in c(1:(length(sens)-1))) {
for (j in c((i+1):length(sens))) {
output[inc,1] <- sens[i]
output[inc,2] <- sens[j]
output[inc,3] <- jvY[,i]%*%jvY[,j] + jvN[,i]%*%jvN[,j]
output[inc,4] <- jvY[,i]%*%jvN[,j] + jvN[,i]%*%jvY[,j]
inc <- inc + 1
}
}
colnames(output) <- c("Senator1","Senator2","Agree","Disagree")
output$weight <- output$Agree/(output$Agree+output$Disagree)
write.csv(output,"senator_pairs.csv",row.names = F)
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
library(tidyr)
library(qdapRegex)
votes <- read.csv("data2.csv", header=T)
votes$date <- sapply(votes$date, as.character)
votes <- separate(votes, date, c("weekday","monthday","yeartime"), sep = '/ ')
votes <- separate(votes, monthday, c("month", "day"), sep = " ")
votes <- separate(votes, yeartime, c("year","time"), sep = 4)
votes$datec <- as.Date(paste(votes$month,votes$day,votes$year),format = "%B %d %Y")
votes$description <- sapply(votes$description, as.character)
votes$description <- rm_white(votes$description)
votes <- separate(votes, description, c("type","extra"), sep = " ", extra = "merge")
roll <- votes[votes$type == "ROLL",]
consent <- votes[votes$type == "CONSENT",]
votesFIN <- votes[(votes$type != "ROLL" & votes$type != "CONSENT"),]
cols <- colnames(votesFIN)
sens <- cols[c(8:(length(cols)-1))]
justvotes <- votesFIN[,sens]
jvY <- (justvotes == 'Y')*1
jvN <- (justvotes == 'N')*1
jvNA <- (justvotes == 'NA')*1
jvNV <- (justvotes == 'NV')*1
jvYN <- jvY + jvN
output <- data.frame(matrix(0,nrow = (length(sens)*(length(sens)-1)/2), ncol = 4))
inc <- 1
for (i in c(1:(length(sens)-1))) {
for (j in c((i+1):length(sens))) {
output[inc,1] <- sens[i]
output[inc,2] <- sens[j]
output[inc,3] <- jvY[,i]%*%jvY[,j] + jvN[,i]%*%jvN[,j]
output[inc,4] <- jvY[,i]%*%jvN[,j] + jvN[,i]%*%jvY[,j]
inc <- inc + 1
}
}
colnames(output) <- c("Senator1","Senator2","Agree","Disagree")
output$weight <- output$Agree/(output$Agree+output$Disagree)
write.csv(output,"senator_pairs.csv",row.names = F)
outmat <- data.frame(matrix(0,nrow = length(sens), ncol = length(sens)))
for (i in c(1:length(sens))) {
for (j in c(1:length(sens))) {
YY <- jvY[,i]%*%jvY[,j] + jvN[,i]%*%jvN[,j]
NN <- jvY[,i]%*%jvN[,j] + jvN[,i]%*%jvY[,j]
outmat[i,j] <- YY/(YY+NN)
}
}
colnames(outmat) <- sens
rownames(outmat) <- sens
my.JSON <- fromJSON(file="senator-info.json")
df <- lapply(my.JSON, function(play) # Loop through each "play"
{
# Convert each group to a data frame.
# This assumes you have 6 elements each time
data.frame(matrix(unlist(play), ncol=4, byrow=T))
})
# Now you have a list of data frames, connect them together in
# one single dataframe
df <- do.call(rbind, df)
colnames(df) <- names(my.JSON[[1]][[1]])
rownames(df) <- NULL
library(stringi)
df$lastname <- stri_extract_last_words(df$name)
for (i in c(1:length(sens))){
datemin = min(votesFIN[jvYN[,i],"datec"])
datemax = max(votesFIN[jvYN[,i],"datec"])
}
for (j in df$lastname){
datemin = min(votesFIN[jvYN[,j],"datec"])
datemax = max(votesFIN[jvYN[,j],"datec"])
}
j
df$lastname
my.JSON
for (i in c(1:length(sens))){
print(min(votesFIN[jvYN[,i],sens[i]]))
}
for (i in c(1:length(sens))){
print(min(votesFIN[jvYN[,i],"datec"]))
}
votesFIN[jvYN[,i],"datec"]
i = 1
jvYN[,i]
x <- votesFIN[jvYN[,i],"datec"]
x
x <- votesFIN[jvYN[,i] == 1,"datec"]
x
for (i in c(1:length(sens))){
print(min(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates <- data.frame(0,nrows = length(sens),3)
minmaxdates <- data.frame(0,nrows = length(sens),3)
for (i in c(1:length(sens))){
minmaxdates[i,1] <- sense[i]
minmaxdates[i,2] <- min(votesFIN[jvYN[,i] == 1,"datec"])
minmaxdates[i,3] <- max(votesFIN[jvYN[,i] == 1,"datec"])
}
minmaxdates <- data.frame(0,nrows = length(sens),3)
for (i in c(1:length(sens))){
minmaxdates[i,1] <- sens[i]
minmaxdates[i,2] <- min(votesFIN[jvYN[,i] == 1,"datec"])
minmaxdates[i,3] <- max(votesFIN[jvYN[,i] == 1,"datec"])
}
minmaxdates
minmaxdates <- data.frame(0,nrows = length(sens),3)
for (i in c(1:length(sens))){
minmaxdates[i,1] <- sens[i]
minmaxdates[i,2] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,3] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates
minmaxdates <- data.frame(0,nrows = length(sens),ncols = 3)
for (i in c(1:length(sens))){
minmaxdates[i,1] <- sens[i]
minmaxdates[i,2] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,3] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates
minmaxdates <- data.frame(0,nrows = length(sens),ncols = 2)
for (i in c(1:length(sens))){
minmaxdates[i,1] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,2] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates
minmaxdates <- data.frame(,nrows = length(sens),ncols = 2)
for (i in c(1:length(sens))){
minmaxdates[i,1] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,2] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates <- data.frame(as.Date("1/1/1991"),nrows = length(sens),ncols = 2)
for (i in c(1:length(sens))){
minmaxdates[i,1] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,2] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates
length(sens)
minmaxdates <- data.frame(as.Date("1/1/1991"), nrows = length(sens), ncols = 2)
for (i in c(1:length(sens))){
minmaxdates[i,1] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,2] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates
minmaxdates <- NA
for (i in c(1:length(sens))){
minmaxdates[i,1] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,2] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates <- data.frame(0,nrows = length(sens),ncols = 2)
minmaxdates <- data.frame(matrix(0, nrows = length(sens), ncols = 2))
minmaxdates <- data.frame(matrix(0, nrow = length(sens), ncol = 2))
for (i in c(1:length(sens))){
minmaxdates[i,1] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,2] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates
as.Date(minmaxdates)
as.Date(minmaxdates$X1)
minmaxdates <- data.frame(matrix(0, nrow = length(sens), ncol = 2))
for (i in c(1:length(sens))){
minmaxdates[i,1] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,2] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates
as.Date(16078)
as.Date(16078,origin = "1900-01-01")
max(votesFIN[jvYN[,i] == 1,"datec"])
as.Date(17281,origin = "1900-01-01")
as.Date(17281,origin = "1950-01-01")
as.Date(17281,origin = "1970-01-01")
minmaxdates$X1 <- as.Date(minmaxdates$X1,origin = "1970-01-01")
minmaxdates
minmaxdates <- data.frame(matrix(0, nrow = length(sens), ncol = 2))
for (i in c(1:length(sens))){
minmaxdates[i,1] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]),origin = "1970-01-01")
minmaxdates[i,2] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]),origin = "1970-01-01")
}
View(minmaxdates)
minmaxdates$X1 <- as.Date(minmaxdates$X1,origin = "1970-01-01")
minmaxdates$X2 <- as.Date(minmaxdates$X2,origin = "1970-01-01")
minmaxdates
minmaxdates <- data.frame(matrix(0, nrow = length(sens), ncol = 3))
for (i in c(1:length(sens))){
minmaxdates[i,1] <- sens[i]
minmaxdates[i,2] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,3] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates$X2 <- as.Date(minmaxdates$X1,origin = "1970-01-01")
minmaxdates$X3 <- as.Date(minmaxdates$X2,origin = "1970-01-01")
minmaxdates
minmaxdates <- data.frame(matrix(0, nrow = length(sens), ncol = 3))
for (i in c(1:length(sens))){
minmaxdates[i,1] <- sens[i]
minmaxdates[i,2] <- as.Date(min(votesFIN[jvYN[,i] == 1,"datec"]))
minmaxdates[i,3] <- as.Date(max(votesFIN[jvYN[,i] == 1,"datec"]))
}
minmaxdates$X2 <- as.Date(minmaxdates$X2,origin = "1970-01-01")
minmaxdates$X3 <- as.Date(minmaxdates$X3,origin = "1970-01-01")
minmaxdates
write.csv(minmaxdates,"minmaxdates.csv",row.names = F)
colnames(minmaxdates) <- c("Senator","FirstDate","LastDate")
minmaxdates
write.csv(minmaxdates,"minmaxdates.csv",row.names = F)
sum(jvY)
jvY
rowsum(jvY)
jvY
?rowsum
rowSums(jvY)
hist(rowSums())
hist(rowSums(jvY))
which(rowSums(jvY)<20)
sum(which(rowSums(jvY)<20))
count(which(rowSums(jvY)<20))
length(which(rowSums(jvY)<20))
fails <- votesFIN[which(rowSums(jvY)<20),]
fails
setwd("/Users/nathanmeyers/Documents/bigdatafinal/data/")
library(tidyr)
library(qdapRegex)
votes <- read.csv("data2.csv", header=T)
votes$date <- sapply(votes$date, as.character)
votes <- separate(votes, date, c("weekday","monthday","yeartime"), sep = '/ ')
votes <- separate(votes, monthday, c("month", "day"), sep = " ")
votes <- separate(votes, yeartime, c("year","time"), sep = 4)
votes$datec <- as.Date(paste(votes$month,votes$day,votes$year),format = "%B %d %Y")
votes$description <- sapply(votes$description, as.character)
votes$description <- rm_white(votes$description)
votes <- separate(votes, description, c("type","extra"), sep = " ", extra = "merge")
roll <- votes[votes$type == "ROLL",]
consent <- votes[votes$type == "CONSENT",]
votesFIN <- votes[(votes$type != "ROLL" & votes$type != "CONSENT"),]
cols <- colnames(votesFIN)
sens <- cols[c(8:(length(cols)-1))]
justvotes <- votesFIN[,sens]
jvY <- (justvotes == 'Y')*1
jvN <- (justvotes == 'N')*1
jvNA <- (justvotes == 'NA')*1
jvNV <- (justvotes == 'NV')*1
jvYN <- jvY + jvN
votesFIN$yay <- rowSums(jvY)
votesFIN$yay <- rowSums(jvY)
votesFIN$yay <- rowSums(jvY)
votesFIN$DEM <- (rowSums(jvY) > 38)
votesFIN$DEM*jvN
colSums(votesFIN$DEM*jvN)
votesFIN$DEM
votesFIN$DEM <- (rowSums(jvY) > 19)
votesFIN$DEM
votesFIN$DEM <- (rowSums(jvY) > 19)*1
votesFIN$DEM
colSums(votesFIN$DEM*jvN)
votesFIN$DEM <- (rowSums(jvY) > 19)*1
colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY)
votesFIN$against <- colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY)
colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY)
votesFIN$against <- t(colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY))
against <- colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY)
against
t(against)
votesFIN$against <- against
votesFIN$against <- t(against)
against <- data.frame(colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY))
against
help data.frame
help data.frame()
?data.frame
colnames(against) <- c("VotesAgainst")
against
write.csv(against,"votesagainst.csv")
votesFIN$DEM <- (rowSums(jvY) > 19)*1
against <- data.frame(colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY)/(jvYN))
colnames(against) <- c("VotesAgainst")
against
against <- data.frame(colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY)/colSums(jvYN))
against
votesFIN$DEM <- (rowSums(jvY) > 19)*1
against <- data.frame(colSums(votesFIN$DEM*jvN+(1-votesFIN$DEM)*jvY)/colSums(jvYN))
colnames(against) <- c("VotesAgainst")
write.csv(against,"votesagainst.csv")
hist(against)
hist(against$VotesAgainst)
